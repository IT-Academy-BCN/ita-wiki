# It Academy Project - SSO

This project uses a set of technologies to facilitate the development of web applications and APIs. The goal of this README is to provide a guide for new project members to integrate more easily and start contributing as soon as possible.

## Getting Started

>[!IMPORTANT]
Before running the project, make sure you have Docker Desktop installed. Once you have Docker Desktop installed and running, follow the steps below:

### With Linux/Mac

1. cd into the sso folder if you haven't already:

   ```bash
   cd services/sso/
   ```

2. Install the required dependencies:

   ```bash
   npm i
   ```

3. Start the project in docker:

   ```bash
   npm run up
   ```

### With Windows

1. cd into the sso folder if you haven't already:

   ```bash
   cd services/sso/
   ```

2. Install the required dependencies:

   ```bash
   npm i
   ```

3. Allow npm to use bash commands:

   ```bash
   npm config set script-shell "C:\\Program Files\\git\\bin\\bash.exe"
   ```

4. Start the project in docker:

   ```bash
   npm run up
   ```



## Scripts

Here are some of the useful scripts you can use:

- `"dev"`: starts a development server using `nodemon`, which watches for file changes and automatically restarts the server. It runs the `src/app.ts` file using `ts-node/esm` loader with experimental specifier resolution and ignores any changes to `node_modules`.
- `"build"`: compiles the TypeScript code into JavaScript code using the `tsc` compiler.
- `"start"`: starts the server by running the `dist/index.js` file generated by the `build` script.
- `"lint"`: lints the TypeScript code in the `src` folder using `eslint`.
- `"lint:fix"`: fixes the linting errors in the TypeScript code in the `src` folder using `eslint`.
- `"test"`: runs the tests using the `vitest` test runner.
- `"up"`: changes directory to the `scripts` folder and runs the `up_sso.sh` script, which starts the database server and other dependencies. Then, it changes directory back to the `back` folder and runs the `npm run dev` script.

## Golden Rules

1.  All code contributions must pass the CI/CD pipeline, which includes running linters, tests, and other checks. Please do not try to make pull requests that do not pass these validations.
2.  Code must follow the project's ESLint configuration. Make sure your editor is configured to use the project's `.eslintrc` file (It should be automatically detected by ESLint if you are using Visual Studio Code).
3.  All code contributions must have accompanying tests.

## Very Useful Documentation

Here are some useful links to official documentation for the technologies used in this project:


- [vitest](https://vitest.dev/guide/) - vitest testing framework documentation.
- [Zod](https://zod.dev/) - TypeScript-first schema validation documentation.
  
## Set up vscode to correctly format .sql files

- We recommend having SQLTools extension installed.
- Set it as your default .sql formatter on vscode:<br>
  ctrl+shit+p<br>
  format document with --> select SQLTools<br>
  Then go to vs code settings.json and make sure to set it up as your default sql formatter:<br>

```json
"[sql]": {
    "editor.defaultFormatter": "mtxr.sqltools"
  }
```

Other formatters, will bizardly add additional $$ to your document, making it impossible to interpret by docker.

